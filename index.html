<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VueTask</title>
    <link rel="icon" type="image/x-icon" href="/Vue.js_Logo_2.svg">
    <link href="styles.css" rel="stylesheet">
    <script src="scripts.js" defer></script>
</head>

<body>
    <div id="app" v-cloak>
        <div class="main">
            <div class='container'>
                <div class="title">
                    <h1>Todo</h1>
                </div>
                <tasklist />
                <input type="text"><button>ADD</button>
            </div>
            <div class='container'>
                <div class="title">
                    <h1>Complited</h1>
                </div>
                <complitedtasklist />

                </ul>
            </div>
        </div>
    </div>
    <script>
        let app = Vue.createApp({})
        app.component('tasklist', {
            template: `
            <ul>
            <li 
            v-for = "(task,i) in tasks"
            :key = "i"
            >
                {{task.name}} 
                <button @click="moveTask(task.id)" class="change">Complete</button>
                <button @click="deleteTask(task.id)" class="remove">Remove</button>
            </li>
            </ul>   
            `,
            components: ['complitedtasklist'],
            methods: {
                moveTask: function(index) {
                    complitedtasklist.complitedtasks.push(this.tasks[index])

                },
                deleteTask: function(index) {
                    if (confirm("Are you sure you want to delete this task?")) {
                        this.tasks.splice(this.tasks.indexOf(index), 1);
                    }
                },
                addTask() {

                }
            },
            data() {
                return {
                    tasks: [{
                        id: 0,
                        name: 'Покушац',
                        deadline: '2022-09-15',
                        status: 'Done',
                    }, {
                        id: 1,
                        name: 'Поспац',
                        deadline: '2022-09-15',
                        status: 'In Process',
                    }],
                    complitedtasks: [{

                    }]
                }
            }
        })
        app.component('complitedtasklist', {
            template: `
            <ul>
            <li 
            v-for = "(task,i) in complitedtasks"
            :key = "i"
            >
                {{task.name}} 
                <button @click="moveTask()" class="change">Complete</button>
                <button @click="deleteTask(task.id)" class="remove">Remove</button>
            </li>
            </ul>   
            `,
            components: ['tasklist'],
            methods: {
                moveTask() {
                    console.log(this.tasks)
                },
                deleteTask: function(event) {
                    if (confirm("Are you sure you want to delete this task?")) {
                        this.tasks.splice(this.tasks.indexOf(event), 1);
                    }
                },
                addTask() {

                }
            },
            data() {
                return {
                    complitedtasks: []
                }
            },
        })
        app.mount('#app')
    </script>
</body>